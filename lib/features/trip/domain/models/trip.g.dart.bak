// BACKUP - manual trip.g.dart created to unblock the generator
// Original manual serializer content (kept as backup). Do not edit this file.

part of 'trip.dart';

DateTime? _nullableDateTime(dynamic value) {
  if (value == null) return null;
  if (value is DateTime) return value;
  if (value is int) return DateTime.fromMillisecondsSinceEpoch(value);
  final s = value.toString();
  return DateTime.tryParse(s);
}

DateTime _dateTime(dynamic value) {
  final d = _nullableDateTime(value);
  if (d == null) throw FormatException('Missing required DateTime value');
  return d;
}

List<T> _listFromJson<T>(dynamic value, T Function(Map<String, dynamic>) fn) {
  if (value == null) return [];
  if (value is List)
    return value.map((e) => fn(e as Map<String, dynamic>)).toList();
  return [];
}

double? _nullableDouble(dynamic value) {
  if (value == null) return null;
  if (value is num) return value.toDouble();
  final s = value.toString();
  return double.tryParse(s);
}

double _double(dynamic value) {
  final d = _nullableDouble(value);
  if (d == null) throw FormatException('Missing required numeric value');
  return d;
}

_Trip _$TripFromJson(Map<String, dynamic> json) {
  final read = (String a, String b) => json[a] ?? json[b];

  return _Trip(
    id: (read('id', 'id') ?? '').toString(),
    city: (read('city', 'city') ?? '').toString(),
    startDate: _dateTime(read('start_date', 'startDate')),
    days: _listFromJson(read('days', 'days'), (e) => TripDay.fromJson(e)),
    summaryTips:
        ((read('summary_tips', 'summaryTips') as List<dynamic>?)
            ?.map((e) => e as String)
            .toList()) ??
        [],
    budgetAmount:
        (read('budget_amount', 'budgetAmount') as int?) ??
        (read('budget_amount', 'budgetAmount') is num
            ? (read('budget_amount', 'budgetAmount') as num).toInt()
            : null),
    currency: (read('currency', 'currency') as String?),
    categories:
        ((read('categories', 'categories') as List<dynamic>?)
            ?.map((e) => e as String)
            .toList()) ??
        [],
    isActive: (read('is_active', 'isActive') as bool?) ?? false,
    createdAt: _nullableDateTime(read('created_at', 'createdAt')),
  );
}

Map<String, dynamic> _$TripToJson(_Trip instance) => <String, dynamic>{
  'id': instance.id,
  'city': instance.city,
  'start_date': instance.startDate.toIso8601String(),
  'days': instance.days.map((e) => e.toJson()).toList(),
  'summary_tips': instance.summaryTips,
  'budget_amount': instance.budgetAmount,
  'currency': instance.currency,
  'categories': instance.categories,
  'is_active': instance.isActive,
  'created_at': instance.createdAt?.toIso8601String(),
};

_TripDay _$TripDayFromJson(Map<String, dynamic> json) {
  return _TripDay(
    day: (json['day'] as num).toInt(),
    blocks: _listFromJson(
      json['blocks'] ?? json['blocks'],
      (e) => TripBlock.fromJson(e),
    ),
  );
}

Map<String, dynamic> _$TripDayToJson(_TripDay instance) => <String, dynamic>{
  'day': instance.day,
  'blocks': instance.blocks.map((e) => e.toJson()).toList(),
};

_TripBlock _$TripBlockFromJson(Map<String, dynamic> json) {
  final read = (String a, String b) => json[a] ?? json[b];

  return _TripBlock(
    title: (read('title', 'title') ?? '').toString(),
    time: read('time', 'time') as String?,
    reason: read('reason', 'reason') as String?,
    placeId: (read('place_id', 'placeId') as String?),
    coords: const TripCoordsConverter().fromJson(
      (read('coords', 'coords') as Map<String, dynamic>?)
          ?.cast<String, dynamic>(),
    ),
    categories:
        ((read('categories', 'categories') as List<dynamic>?)
            ?.map((e) => e as String)
            .toList()) ??
        [],
    rating: _nullableDouble(read('rating', 'rating')),
    priceLevel:
        (read('price_level', 'priceLevel') as int?) ??
        (read('price_level', 'priceLevel') is num
            ? (read('price_level', 'priceLevel') as num).toInt()
            : null),
    openingHours: ((read('opening_hours', 'openingHours') as List<dynamic>?)
        ?.map((e) => e as String)
        .toList()),
    address: read('address', 'address') as String?,
    crowdHint:
        (read('crowd_hint', 'crowdHint') as String?) ??
        (read('crowd_hint', 'crowdHint') == null
            ? null
            : (read('crowd_hint', 'crowdHint') as String)),
    sources:
        ((read('sources', 'sources') as List<dynamic>?)
            ?.map((e) => e as String)
            .toList()) ??
        [],
  );
}

Map<String, dynamic> _$TripBlockToJson(_TripBlock instance) =>
    <String, dynamic>{
      'title': instance.title,
      'time': instance.time,
      'reason': instance.reason,
      'place_id': instance.placeId,
      'coords': const TripCoordsConverter().toJson(instance.coords),
      'categories': instance.categories,
      'rating': instance.rating,
      'price_level': instance.priceLevel,
      'opening_hours': instance.openingHours,
      'address': instance.address,
      'crowd_hint': instance.crowdHint,
      'sources': instance.sources,
    };

_TripCoords _$TripCoordsFromJson(Map<String, dynamic> json) {
  return _TripCoords(
    lat: _nullableDouble(json['lat'] ?? json['lat']) ?? 0.0,
    lng: _nullableDouble(json['lng'] ?? json['lng']) ?? 0.0,
  );
}

Map<String, dynamic> _$TripCoordsToJson(_TripCoords instance) =>
    <String, dynamic>{'lat': instance.lat, 'lng': instance.lng};
